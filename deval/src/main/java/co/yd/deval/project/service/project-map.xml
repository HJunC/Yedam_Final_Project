<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="co.yd.deval.project.service.ProjectMapper">

    <resultMap id="projectResultMap" type="co.yd.deval.project.vo.ProjectVO">
        <id property="projectNo" column="project_no" />
        <result property="projectName" column="project_name"/>
        <result property="state" column="state"/>
        <result property="process" column="process"/>
        <result property="recruitSdt" column="recruit_sdt"/>
        <result property="recruitEdt" column="recruit_edt"/>
        <result property="subject" column="subject"/>
        <result property="lang" column="lang"/>
        <result property="totalRcnt" column="total_rcnt"/>
        <result property="projectSdt" column="project_sdt"/>
        <result property="frontRcnt" column="front_rcnt"/>
        <result property="backRcnt" column="back_rcnt"/>
        <result property="designRcnt" column="design_rcnt"/>
        <result property="projectEdt" column="project_edt"/>
        <result property="fullRcnt" column="full_rcnt"/>
        <result property="plannerRcnt" column="planner_rcnt"/>
        <result property="projectTerm" column="project_term"/>
        <result property="hit" column="hit"/>
        <result property="applyRcnt" column="apply_rcnt"/>
        <result property="leaderId" column="leader_id"/>
    </resultMap>

    <insert id="insertProject">
        INSERT INTO PROJECT (PROJECT_NO,
                             PROJECT_NAME,
                             STATE,
                             PROCESS,
                             RECRUIT_SDT,
                             RECRUIT_EDT,
                             SUBJECT,
                             LANG,
                             TOTAL_RCNT,
                             PROJECT_SDT,
                             FRONT_RCNT,
                             BACK_RCNT,
                             DESIGN_RCNT,
                             PROJECT_EDT,
                             FULL_RCNT,
                             PLANNER_RCNT,
                             PROJECT_TERM,
                             HIT,
                             APPLY_RCNT,
                             LEADER_ID)
        VALUES (#{projectNo},
                #{projectName},
                #{state},
                #{process},
                sysdate,
                #{recruitEdt},
                #{subject},
                #{lang},
                #{totalRcnt},
                #{projectSdt},
                #{frontRcnt},
                #{backRcnt},
                #{designRcnt},
                #{projectEdt},
                #{fullRcnt},
                #{plannerRcnt},
                #{projectTerm},
                0,
                0,
                #{leaderId});
    </insert>

    <update id="updateProject">
        UPDATE PROJECT
        <set>
            <if test="projectName != null">PROJECT_NAME = #{projectName},</if>
            <if test="state != null">STATE = #{state},</if>
            <if test="process != null">PROCESS = #{process},</if>
            <if test="recruitEdt != null">RECRUIT_EDT = #{recruitEdt},</if>
            <if test="subject != null">SUBJECT = #{subject},</if>
            <if test="lang != null">LANG = #{lang},</if>
            <if test="totalRcnt != null">TOTAL_RCNT = #{totalRcnt},</if>
            <if test="projectSdt != null">PROJECT_SDT = #{projectSdt},</if>
            <if test="frontRcnt != null">FRONT_RCNT = #{frontRcnt},</if>
            <if test="backRcnt != null">BACK_RCNT = #{backRcnt},</if>
            <if test="designRcnt != null">DESIGN_RCNT = #{designRcnt},</if>
            <if test="projectEdt != null">PROJECT_EDT = #{projectEdt},</if>
            <if test="fullRcnt != null">FULL_RCNT = #{fullRcnt},</if>
            <if test="plannerRcnt != null">PLANNER_RCNT = #{plannerRcnt},</if>
            <if test="projectTerm != null">PROJECT_TERM = #{projectTerm},</if>
            <if test="applyRcnt != null">APPLY_RCNT = #{applyRcnt},</if>
            <if test="leaderId != null">LEADER_ID = #{leaderId},</if>
        </set>
        WHERE PROJECT_NO = #{projectNo}
    </update>

    <update id="updateHit">
        UPDATE PROJECT SET HIT = #{hit}
        WHERE PROJECT_NO = #{projectNo}
    </update>

    <delete id="deleteProject">
        DELETE FROM PROJECT
        WHERE PROJECT_NO = #{projectNo}
    </delete>

    <select id="selectProjectAll" resultMap="projectResultMap">
        SELECT *
          FROM PROJECT
    </select>

    <select id="selectProject" resultMap="projectResultMap">
        SELECT *
          FROM PROJECT
         WHERE PROJECT_NO = #{projectNo}
    </select>

    <select id="findByLeaderIdAndState" resultMap="projectResultMap">
        SELECT *
          FROM PROJECT
         WHERE LEADER_ID = #{leaderId}
           AND STATE = #{state}
    </select>
</mapper>